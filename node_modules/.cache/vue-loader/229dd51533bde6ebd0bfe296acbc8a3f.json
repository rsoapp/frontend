{"remainingRequest":"/home/majsavli/rsoapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/majsavli/rsoapp/src/views/EditAd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/majsavli/rsoapp/src/views/EditAd.vue","mtime":1609950161626},{"path":"/home/majsavli/rsoapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/majsavli/rsoapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/majsavli/rsoapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/majsavli/rsoapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogImNyZWF0ZUFkIiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY2F0ZWdvcmllczogWydCcmVua2FsYScsICdUb2xrYWxhJywgJ0dvZGFsYScsICdQaWhhbGEnLCAnSW7FoXRydW1lbnRpIHMgdGlwa2FtaScsICdUcm9iaWxhJywgJ0RydWdvJ10sCiAgICAgICAgICAgIGNvbmRpdGlvbnM6IFsnTm92bycsICdSYWJsamVubyddLAogICAgICAgICAgICBtZXNzYWdlOiAiIiwKICAgICAgICAgICAgdGl0bGU6IG51bGwsCiAgICAgICAgICAgIHByaWNlOiBudWxsLAogICAgICAgICAgICBkZXNjOiBudWxsLAogICAgICAgICAgICBjYXRlZ29yeTogbnVsbCwKICAgICAgICAgICAgY29uZDogbnVsbCwKICAgICAgICAgICAgaW1hZ2VzOiBudWxsLAogICAgICAgICAgICBhZDogbnVsbAogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkOiBmdW5jdGlvbigpIHsKICAgICAgICBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC92MS9hZHMvJyArIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgdGhpcy5hZCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcicsIGUpCiAgICAgICAgfSkKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgc3VibWl0RWRpdGVkQWQoKSB7CiAgICAgICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgICAgICAgIGxldCB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3YxL2Fkcy8iICsgdGhpcy5hZC5pZAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2VzICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbWFnZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImltYWdlcyIsIHRoaXMuaW1hZ2VzW2ldLCB0aGlzLmltYWdlc1tpXS5uYW1lKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJpbWFnZXMiLCBudWxsKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3RpdGxlJywgdGhpcy5hZC50aXRsZSkKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdwcmljZScsIHRoaXMuYWQucHJpY2UpCiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZGVzY3JpcHRpb24nLCB0aGlzLmFkLmRlc2MpCiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY29uZCcsIHRoaXMuYWQuY29uZCkKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdjYXRlZ29yeScsIHRoaXMuYWQuY2F0ZWdvcnkpCgogICAgICAgICAgICBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ3Rva2VuJzogdGhpcy4kc3RvcmUuc3RhdGUubG9nZ2VkVXNlcklkCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYm9keTogZm9ybURhdGEKICAgICAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gIk9nbGFzIHVzcGXFoW5vIHBvc29kb2JsamVuISIKICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9ICJOYXBha2EuIFByb3NpbW8gcG9za3VzaXRlIHpub3ZhLiIKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIG9uRmlsZVNlbGVjdGVkKGV2ZW50KSB7CiAgICAgICAgICAgIHRoaXMuaW1hZ2VzID0gZXZlbnQudGFyZ2V0LmZpbGVzCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["EditAd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditAd.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"createAd\">\n        <hr>\n        <div v-if=\"message\" class=\"container alert alert-info infoDiv\">\n           {{ message }}\n        </div>\n        <h2>Urejanje oglasa</h2>\n        <br>\n        <b-form v-if=\"this.ad\" @submit.prevent class=\"adForm container border rounded bg-light\">\n            <b-form-group label=\"Naslov:\">\n                <b-form-input v-model=\"ad.title\" placeholder=\"Vpišite ime oglasa\" required id=\"title\"></b-form-input>\n            </b-form-group>\n            <b-form-group label=\"Cena:\" class=\"priceField\">\n                <b-form-input v-model=\"ad.price\" type=\"number\" placeholder=\"Vpišite ceno v evrih\" required id=\"price\"></b-form-input>\n            </b-form-group>\n            <b-form-group label=\"Opis:\">\n                <b-form-textarea v-model=\"ad.desc\" placeholder=\"Podroben opis oglasa\" required id=\"desc\"></b-form-textarea>\n            </b-form-group>\n            <b-form-group label=\"Kategorija:\">\n                <b-form-select v-model=\"ad.category\" :options=\"categories\" required id=\"category\"></b-form-select>\n            </b-form-group>\n            <b-form-group label=\"Stanje:\">\n                <b-form-select v-model=\"ad.cond\" :options=\"conditions\" required id=\"cond\"></b-form-select>\n            </b-form-group>\n            <b-form-group label=\"Slike:\">\n                <b-form-file @change=\"onFileSelected\" id=\"images\" multiple placeholder=\"Izberi slike...\" drop-placeholder=\"Drop file here...\"></b-form-file>\n            </b-form-group>\n            <b-button @click=\"submitEditedAd\" type=\"submit\" variant=\"info\" class=\"alert-info\">Shrani</b-button>\n        </b-form>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { mapState } from 'vuex'\n\nexport default {\n    name: \"createAd\",\n    data() {\n        return {\n            categories: ['Brenkala', 'Tolkala', 'Godala', 'Pihala', 'Inštrumenti s tipkami', 'Trobila', 'Drugo'],\n            conditions: ['Novo', 'Rabljeno'],\n            message: \"\",\n            title: null,\n            price: null,\n            desc: null,\n            category: null,\n            cond: null,\n            images: null,\n            ad: null\n        }\n    },\n    mounted: function() {\n        axios.get('http://localhost:8080/v1/ads/' + this.$route.params.id)\n        .then((response) => {\n            this.ad = response.data;\n        }).catch(e => {\n            console.log('Error', e)\n        })\n    },\n    methods: {\n        submitEditedAd() {\n            let formData = new FormData()\n            let url = \"http://localhost:8080/v1/ads/\" + this.ad.id\n            \n            if (this.images != null) {\n                for (var i = 0; i < this.images.length; i++) {\n                    formData.append(\"images\", this.images[i], this.images[i].name)\n                }\n            }\n            else {\n                formData.append(\"images\", null)\n            }\n\n            formData.append('title', this.ad.title)\n            formData.append('price', this.ad.price)\n            formData.append('description', this.ad.desc)\n            formData.append('cond', this.ad.cond)\n            formData.append('category', this.ad.category)\n\n            fetch(url, {\n                method: 'PUT',\n                headers: {\n                    'token': this.$store.state.loggedUserId\n                },\n                body: formData\n            }).then(res => {\n                this.message = \"Oglas uspešno posodobljen!\"\n            }).catch(err => {\n                console.log(err)\n                this.message = \"Napaka. Prosimo poskusite znova.\"\n            })\n        },\n        onFileSelected(event) {\n            this.images = event.target.files\n        }\n    }\n}\n</script>\n\n<style scoped>\n.adForm {\n    width: 50%;\n    padding: 30px;\n}\n\n.infoDiv {\n    width: 400px;\n}\n</style>"]}]}