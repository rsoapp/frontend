{"remainingRequest":"/home/majsavli/rsoapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/majsavli/rsoapp/src/views/CreateAd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/majsavli/rsoapp/src/views/CreateAd.vue","mtime":1609944298688},{"path":"/home/majsavli/rsoapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/majsavli/rsoapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/majsavli/rsoapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/majsavli/rsoapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogImNyZWF0ZUFkIiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY2F0ZWdvcmllczogWydCcmVua2FsYScsICdUb2xrYWxhJywgJ0dvZGFsYScsICdQaWhhbGEnLCAnSW7FoXRydW1lbnRpIHMgdGlwa2FtaScsICdUcm9iaWxhJywgJ0RydWdvJ10sCiAgICAgICAgICAgIGNvbmRpdGlvbnM6IFsnTm92bycsICdSYWJsamVubyddLAogICAgICAgICAgICBtZXNzYWdlOiAiIiwKICAgICAgICAgICAgdGl0bGU6IG51bGwsCiAgICAgICAgICAgIHByaWNlOiBudWxsLAogICAgICAgICAgICBkZXNjOiBudWxsLAogICAgICAgICAgICBjYXRlZ29yeTogbnVsbCwKICAgICAgICAgICAgY29uZDogbnVsbCwKICAgICAgICAgICAgaW1hZ2VzOiBudWxsCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBzdWJtaXRBZCgpIHsKICAgICAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgICAgICAgbGV0IHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvdjEvYWRzL3VzZXIvIiArIFN0cmluZyh0aGlzLiRzdG9yZS5zdGF0ZS5sb2dnZWRVc2VySWQpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAodGhpcy5pbWFnZXMgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmltYWdlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiaW1hZ2VzIiwgdGhpcy5pbWFnZXNbaV0sIHRoaXMuaW1hZ2VzW2ldLm5hbWUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImltYWdlcyIsIG51bGwpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgndGl0bGUnLCB0aGlzLnRpdGxlKQogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3ByaWNlJywgdGhpcy5wcmljZSkKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdkZXNjcmlwdGlvbicsIHRoaXMuZGVzYykKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdjb25kJywgdGhpcy5jb25kKQogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2NhdGVnb3J5JywgdGhpcy5jYXRlZ29yeSkKCiAgICAgICAgICAgIGZldGNoKHVybCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBtb2RlOiAnbm8tY29ycycsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ3Rva2VuJzogdGhpcy4kc3RvcmUuc3RhdGUubG9nZ2VkVXNlcklkCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYm9keTogZm9ybURhdGEKICAgICAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gIk9nbGFzIHVzcGXFoW5vIG9iamF2bGplbiEiCiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAiTmFwYWthLiBQcm9zaW1vIHBvc2t1c2l0ZSB6bm92YS4iCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBvbkZpbGVTZWxlY3RlZChldmVudCkgewogICAgICAgICAgICB0aGlzLmltYWdlcyA9IGV2ZW50LnRhcmdldC5maWxlcwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["CreateAd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateAd.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"createAd\">\n        <hr>\n        <div v-if=\"message\" class=\"container alert alert-info infoDiv\">\n           {{ message }}\n        </div>\n        <b-form @submit.prevent class=\"adForm container border rounded bg-light\">\n            <b-form-group label=\"Naslov:\">\n                <b-form-input v-model=\"title\" placeholder=\"Vpišite ime oglasa\" required id=\"title\"></b-form-input>\n            </b-form-group>\n            <b-form-group label=\"Cena:\" class=\"priceField\">\n                <b-form-input v-model=\"price\" type=\"number\" placeholder=\"Vpišite ceno v evrih\" required id=\"price\"></b-form-input>\n            </b-form-group>\n            <b-form-group label=\"Opis:\">\n                <b-form-textarea v-model=\"desc\" placeholder=\"Podroben opis oglasa\" required id=\"desc\"></b-form-textarea>\n            </b-form-group>\n            <b-form-group label=\"Kategorija:\">\n                <b-form-select v-model=\"category\" :options=\"categories\" required id=\"category\"></b-form-select>\n            </b-form-group>\n            <b-form-group label=\"Stanje:\">\n                <b-form-select v-model=\"cond\" :options=\"conditions\" required id=\"cond\"></b-form-select>\n            </b-form-group>\n            <b-form-group label=\"Slike:\">\n                <b-form-file @change=\"onFileSelected\" id=\"images\" multiple placeholder=\"Izberi slike...\" drop-placeholder=\"Drop file here...\"></b-form-file>\n            </b-form-group>\n            <b-button @click=\"submitAd\" type=\"submit\" variant=\"info\" class=\"alert-info\">Ustvari oglas</b-button>\n        </b-form>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { mapState } from 'vuex'\n\nexport default {\n    name: \"createAd\",\n    data() {\n        return {\n            categories: ['Brenkala', 'Tolkala', 'Godala', 'Pihala', 'Inštrumenti s tipkami', 'Trobila', 'Drugo'],\n            conditions: ['Novo', 'Rabljeno'],\n            message: \"\",\n            title: null,\n            price: null,\n            desc: null,\n            category: null,\n            cond: null,\n            images: null\n        }\n    },\n    methods: {\n        submitAd() {\n            let formData = new FormData()\n            let url = \"http://localhost:8080/v1/ads/user/\" + String(this.$store.state.loggedUserId)\n            \n            if (this.images != null) {\n                for (var i = 0; i < this.images.length; i++) {\n                    formData.append(\"images\", this.images[i], this.images[i].name)\n                }\n            }\n            else {\n                formData.append(\"images\", null)\n            }\n\n            formData.append('title', this.title)\n            formData.append('price', this.price)\n            formData.append('description', this.desc)\n            formData.append('cond', this.cond)\n            formData.append('category', this.category)\n\n            fetch(url, {\n                method: 'POST',\n                mode: 'no-cors',\n                headers: {\n                    'token': this.$store.state.loggedUserId\n                },\n                body: formData\n            }).then(res => {\n                this.message = \"Oglas uspešno objavljen!\"\n            }).catch(err => {\n                this.message = \"Napaka. Prosimo poskusite znova.\"\n            })\n        },\n        onFileSelected(event) {\n            this.images = event.target.files\n        }\n    }\n}\n</script>\n\n<style scoped>\n.adForm {\n    width: 50%;\n    padding: 30px;\n}\n\n.infoDiv {\n    width: 400px;\n}\n</style>"]}]}